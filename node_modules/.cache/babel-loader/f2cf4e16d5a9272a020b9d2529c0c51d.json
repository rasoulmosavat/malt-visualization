{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar util = _interopRequireWildcard(require(\"./util\"));\n\nvar _integer = require(\"../integer\");\n\nvar _error = require(\"../error\");\n/**\n * Copyright (c) 2002-2020 \"Neo4j,\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Internal holder of the transaction configuration.\n * It performs input validation and value conversion for further serialization by the Bolt protocol layer.\n * Users of the driver provide transaction configuration as regular objects `{timeout: 10, metadata: {key: 'value'}}`.\n * Driver converts such objects to {@link TxConfig} immediately and uses converted values everywhere.\n */\n\n\nvar TxConfig = /*#__PURE__*/function () {\n  /**\n   * @constructor\n   * @param {Object} config the raw configuration object.\n   */\n  function TxConfig(config) {\n    (0, _classCallCheck2[\"default\"])(this, TxConfig);\n    assertValidConfig(config);\n    this.timeout = extractTimeout(config);\n    this.metadata = extractMetadata(config);\n  }\n  /**\n   * Get an empty config object.\n   * @return {TxConfig} an empty config.\n   */\n\n\n  (0, _createClass2[\"default\"])(TxConfig, [{\n    key: \"isEmpty\",\n\n    /**\n     * Check if this config object is empty. I.e. has no configuration values specified.\n     * @return {boolean} `true` if this object is empty, `false` otherwise.\n     */\n    value: function isEmpty() {\n      return Object.values(this).every(function (value) {\n        return value == null;\n      });\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty() {\n      return EMPTY_CONFIG;\n    }\n  }]);\n  return TxConfig;\n}();\n\nexports[\"default\"] = TxConfig;\nvar EMPTY_CONFIG = new TxConfig({});\n/**\n * @return {Integer|null}\n */\n\nfunction extractTimeout(config) {\n  if (util.isObject(config) && (config.timeout || config.timeout === 0)) {\n    util.assertNumberOrInteger(config.timeout, 'Transaction timeout');\n    var timeout = (0, _integer[\"int\"])(config.timeout);\n\n    if (timeout.isZero()) {\n      throw (0, _error.newError)('Transaction timeout should not be zero');\n    }\n\n    if (timeout.isNegative()) {\n      throw (0, _error.newError)('Transaction timeout should not be negative');\n    }\n\n    return timeout;\n  }\n\n  return null;\n}\n/**\n * @return {object|null}\n */\n\n\nfunction extractMetadata(config) {\n  if (util.isObject(config) && config.metadata) {\n    var metadata = config.metadata;\n    util.assertObject(metadata);\n\n    if (Object.keys(metadata).length !== 0) {\n      // not an empty object\n      return metadata;\n    }\n  }\n\n  return null;\n}\n\nfunction assertValidConfig(config) {\n  if (config) {\n    util.assertObject(config, 'Transaction config');\n  }\n}","map":{"version":3,"sources":["d:/webback/pro5/node_modules/neo4j-driver/lib/internal/tx-config.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_classCallCheck2","_createClass2","util","_integer","_error","TxConfig","config","assertValidConfig","timeout","extractTimeout","metadata","extractMetadata","key","isEmpty","values","every","empty","EMPTY_CONFIG","isObject","assertNumberOrInteger","isZero","newError","isNegative","assertObject","keys","length"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar util = _interopRequireWildcard(require(\"./util\"));\n\nvar _integer = require(\"../integer\");\n\nvar _error = require(\"../error\");\n\n/**\n * Copyright (c) 2002-2020 \"Neo4j,\"\n * Neo4j Sweden AB [http://neo4j.com]\n *\n * This file is part of Neo4j.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Internal holder of the transaction configuration.\n * It performs input validation and value conversion for further serialization by the Bolt protocol layer.\n * Users of the driver provide transaction configuration as regular objects `{timeout: 10, metadata: {key: 'value'}}`.\n * Driver converts such objects to {@link TxConfig} immediately and uses converted values everywhere.\n */\nvar TxConfig =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @constructor\n   * @param {Object} config the raw configuration object.\n   */\n  function TxConfig(config) {\n    (0, _classCallCheck2[\"default\"])(this, TxConfig);\n    assertValidConfig(config);\n    this.timeout = extractTimeout(config);\n    this.metadata = extractMetadata(config);\n  }\n  /**\n   * Get an empty config object.\n   * @return {TxConfig} an empty config.\n   */\n\n\n  (0, _createClass2[\"default\"])(TxConfig, [{\n    key: \"isEmpty\",\n\n    /**\n     * Check if this config object is empty. I.e. has no configuration values specified.\n     * @return {boolean} `true` if this object is empty, `false` otherwise.\n     */\n    value: function isEmpty() {\n      return Object.values(this).every(function (value) {\n        return value == null;\n      });\n    }\n  }], [{\n    key: \"empty\",\n    value: function empty() {\n      return EMPTY_CONFIG;\n    }\n  }]);\n  return TxConfig;\n}();\n\nexports[\"default\"] = TxConfig;\nvar EMPTY_CONFIG = new TxConfig({});\n/**\n * @return {Integer|null}\n */\n\nfunction extractTimeout(config) {\n  if (util.isObject(config) && (config.timeout || config.timeout === 0)) {\n    util.assertNumberOrInteger(config.timeout, 'Transaction timeout');\n    var timeout = (0, _integer[\"int\"])(config.timeout);\n\n    if (timeout.isZero()) {\n      throw (0, _error.newError)('Transaction timeout should not be zero');\n    }\n\n    if (timeout.isNegative()) {\n      throw (0, _error.newError)('Transaction timeout should not be negative');\n    }\n\n    return timeout;\n  }\n\n  return null;\n}\n/**\n * @return {object|null}\n */\n\n\nfunction extractMetadata(config) {\n  if (util.isObject(config) && config.metadata) {\n    var metadata = config.metadata;\n    util.assertObject(metadata);\n\n    if (Object.keys(metadata).length !== 0) {\n      // not an empty object\n      return metadata;\n    }\n  }\n\n  return null;\n}\n\nfunction assertValidConfig(config) {\n  if (config) {\n    util.assertObject(config, 'Transaction config');\n  }\n}"]},"metadata":{},"sourceType":"script"}